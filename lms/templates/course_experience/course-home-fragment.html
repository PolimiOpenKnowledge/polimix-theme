## mako

<%page expression_filter="h"/>
<%namespace name='static' file='../static_content.html'/>

<%!
import json

from django.conf import settings
from django.utils.translation import ugettext as _
from django.template.defaultfilters import escapejs
from django.core.urlresolvers import reverse

from django_comment_client.permissions import has_permission
from openedx.core.djangolib.js_utils import dump_js_escaped_json, js_escaped_string
from openedx.core.djangolib.markup import HTML
from openedx.features.course_experience import UNIFIED_COURSE_TAB_FLAG, SHOW_REVIEWS_TOOL_FLAG
from openedx.features.course_experience.course_tools import CourseToolsPluginManager
%>

<%block name="content">
<div class="course-view container" id="course-container">
    <header class="page-header has-secondary">
        <div class="page-header-main">
            <nav aria-label="${_('Course Outline')}" class="sr-is-focusable" tabindex="-1">
                <h2 class="hd hd-3 page-title">${course.display_name_with_default}</h2>
            </nav>
        </div>
        <div class="page-header-secondary">
            % if settings.FEATURES.get('ENABLE_COURSEWARE_SEARCH'):
                <div class="page-header-search">
                    <form class="search-form" role="search" action="${reverse('openedx.course_search.course_search_results', args=[course_key])}">
                        <label class="field-label sr-only" for="search" id="search-hint">${_('Search the course')}</label>
                        <input
                                class="field-input input-text search-input"
                                type="search"
                                name="query"
                                id="search"
                                placeholder="${_('Search the course')}"
                        />
                        <button class="btn btn-small search-button" type="submit">${_('Search')}</button>
                    </form>
                </div>
            % endif
            <div class="form-actions">
                % if resume_course_url:
                    <a class="btn btn-brand action-resume-course" href="${resume_course_url}">
                        % if has_visited_course:
                            ${_("Resume Course")}
                        % else:
                            ${_("Start Course")}
                        % endif
                    </a>
                % endif
            </div>
        </div>
    </header>
    <div class="page-content">
        <div class="layout layout-1t2t">
            <main class="layout-col layout-col-b">
                % if welcome_message_fragment and UNIFIED_COURSE_TAB_FLAG.is_enabled(course.id):
                    <div class="section section-dates">
                        ${HTML(welcome_message_fragment.body_html())}
                    </div>
                % endif

                ${HTML(outline_fragment.body_html())}
            </main>
            <aside class="course-sidebar layout-col layout-col-a">
                <%
                course_tools = CourseToolsPluginManager.get_course_tools()
                %>
                % if course_tools:
                    <div class="section section-tools">
                        <h3 class="hd-6">${_("Course Tools")}</h3>
                        <ul class="list-unstyled">
                            % for course_tool in course_tools:
                                % if course_tool.is_enabled(request, course_key):
                                    <li>
                                        <a href="${course_tool.url(course_key)}">
                                            <span class="icon ${course_tool.icon_classes()}" aria-hidden="true"></span>
                                            ${course_tool.title()}
                                        </a>
                                    </li>
                                % endif
                            % endfor
                        </ul>
                    </div>
                % endif
                <div class="section section-dates">
                    ${HTML(dates_fragment.body_html())}
                </div>
                % if handouts_html:
                    <div class="section section-handouts">
                        <h3 class="hd-6">${_("Course Handouts")}</h3>
                        ${HTML(handouts_html)}
                    </div>
                % endif
            </aside>
        </div>
    </div>
    ${HTML(course_sock_fragment.body_html())}
</div>
</%block>

<style>
  body {
    font-family: "Trebuchet MS","Open Sans",Verdana,Geneva,sans-serif,sans-serif;
  }

  /* header */
  h2.course-header {
    color: #707172;
    line-height: 40px;
  }
  #polimi-header, #polimi-footer {
    background: #00acd7;
    height: 20px;
    box-shadow: inset 0 -4px 8px -2px rgba(0,0,0,0.2);
    text-align: center;
    line-height: 17px;
  }
  .header-global.slim {
    border-bottom: 1px solid #0079bc;
    min-height:80px;
  }
  .header-global.slim h2{
       margin-bottom: 0;
       text-transform: none;
       text-shadow: 0 1px 0 #fff;
       white-space: nowrap;
       text-overflow: ellipsis;
       overflow: hidden;
       width: 65%;
    }
 
  .header-global.slim .wrapper-header .logo img {
    height:80px;
    margin-top: -14px;
    margin-left: 3px;
  }
  .wrapper-course-material .course-tabs li {
    margin-right:4px;
  }
  .header-global.slim .wrapper-header .wrapper-user-menu {
    background-color: #e9e6df;
    display: flex;
    align-items: center;
    margin-top: 7px!important;
  }
  .dropdown-menu-container {
    height:44px;
  }
  .dropdown-menu-container .menu-title {
    color: #707172;
    display: flex;
    align-items: center;
    margin-right: 5px;
  }
  .dropdown-menu-container .menu-title:hover {
    text-decoration: none;
    background: #fbfbf9;
  }
  .list-divided .item {
    border-bottom:0;
  }
  .dropdown-menu-container .dropdown-menu .dropdown-item a {
    padding: 3px 5px;
    font-size: .92em;
    color: #00acd7;
  }
  .dropdown-menu-container .dropdown-menu .dropdown-item a:hover {
    text-decoration: none;
    color: #707172;
  }

  /* footer */
  .footer-content-wrapper {
    display:flex;
    flex-wrap: wrap;
  }
  footer#footer-edx-v3 .footer-content-wrapper .footer-logo {
    width:auto;
    position: relative;
    float: left;
    margin: -10px 39px 0 0;
  }
  .footer-content-wrapper .footer-logo a {
    display: block;
    color: #00acd7;
  }
  .footer-content-wrapper .footer-logo a:hover, .footer-content-wrapper .footer-logo a:focus, .footer-content-wrapper .footer-logo a:active {
    border-bottom: none;
  }
  .footer-content-wrapper li {
    font-size: .875em;
    font-weight: 500;
    display: inline-block;
    margin: 0 21px 0 0;
  }
  .footer-content-wrapper li a {
    color: #707172;
  }
  .footer-content-wrapper li a:hover, .footer-content-wrapper li a:focus, .footer-content-wrapper li a:active {
    border-bottom: 1px dotted #00acdf;
  }
  footer#footer-edx-v3 .footer-content-wrapper .site-details .site-nav a {
    text-transform: uppercase;
    font-family: "Yanone Kaffeesatz","Bree Serif",Georgia,Cambria,"Times New Roman",Times,serif;
    font-size: 21px;
    line-height: 21px;
    color: #707172;
  }
  .banner-book-footer {
    clear:both;
  }
  .banner-book-footer p {
    padding: 5px;
    font-size: .8em;
  }
  .references {
    display: flex;
    flex-wrap:wrap;
    flex-direction: row-reverse;
  }
  .references a.open-edx-logo:hover, .references a.open-edx-logo:active, .references a.open-edx-logo:focus,
  .references a.eco-project-logo:hover, .references a.eco-project-logo:active, .references a.eco-project-logo:focus {
    border-bottom: none;
  }
  a.open-edx-logo {
    display: block;
    text-align:left;
  }
  .references .additional-logo-info {
    font-size: .8em;
    margin-top: 75px;
    display: block;
    text-align: left;
    padding-left: 10px;
  }
  .references .additional-logo-info span {
    display: block;
  }
  .references .additional-logo-info span.in-colla b{
    margin-top: -2px;
  }
  .eco-references {
    display: flex;
    flex-direction: column;
    padding-right: 20px;
    border-right: 1px solid #ebebeb;
  }
  .eco-loghi-container {
    margin-top: 7px;
    text-align:left;
  }
  .eco-loghi {
    float: left;
    width: flex-grid(6, 12);
  }
  .eco-project-logo {
    float: right;
    text-align:center;
  }
  .reimagine-award {
    font-size:0.8em;
    line-height:1.6em;
    margin-top:60px;
  }
  .award-link {
    float: left;
  }
  .award-desc {
    float: left;
    text-align: left;
    margin-left: 20px;
    margin-top: 15px;
  }
  .built-on {
    float: right;
    padding-left: 20px;
  }
  .terms {
    clear: left;
    margin-top: 30px;
  }
  .terms ol {
    margin-left: 0;
  }
  footer#footer-edx-v3 nav.nav-terms li {
    font-size: .8em;
    display: inline;
    float: left;
    padding: 5px;
    border-right: 1px dotted #707172;
    margin-right:0;
  }
  footer#footer-edx-v3 nav.nav-terms li:last-child {
    border: none;
  }
  footer#footer-edx-v3 nav.nav-terms li a {
    color: #707172;
  }
  footer#footer-edx-v3 nav.nav-terms li a.standard-link {
    color: #00acd7;
  }

  /* right floating buttons */
  .contact-us-tab {
    position: fixed;
    z-index: 99;
    top: 500px;
    right: 5px;
    opacity: .85;
    transform: rotate(90deg);
    transform-origin: top right;
  }
  .contact-us-tab a {
    padding: 5px;
    background-color: #00acd7;
  }
  .contact-us-tab a:link, .contact-us-tab a:visited {
    color: #fbfbf9;
  }
  .contact-us-tab a:hover {
    color: #00acd7;
    background-color: #fbfbf9;
  }
  .dropdown-menu-container .menu-image {
    margin: 5px 5px 8px 5px;
    max-width: 35px !important;
  }
  .header-global.slim .wrapper-header .course-header {
    margin-top: 10px;
  }
</style>
