<%!
from django.utils.translation import ugettext as _
from django.core.urlresolvers import reverse
from microsite_configuration import microsite
import third_party_auth
from third_party_auth import provider, pipeline
%>
<%namespace file='main.html' import="login_query, stanford_theme_enabled"/>
<%namespace name='static' file='static_content.html'/>


<header>
  <h3 class="sr">${_("Registration Help")}</h3>
</header>

% if has_extauth_info is UNDEFINED:

% if settings.FEATURES['AUTH_USE_SHIB']:
<div class="cta aunica-login bolder-shame">
  <h3><span class="it">Sei un utente POLIMI?</span><span class="locale-separator">/</span><span class="en">Are you a POLIMI user?</span></h3>
  <p class="instructions">
     <span class="it">Se sei un utente POLIMI <strong>devi accedere</strong> con il tuo <a href="${reverse('shib-login')}${login_query()}">Codice Persona</a>.</span>
     <span class="locale-separator">/</span>
     <span class="en">If you are a POLIMI user <strong>you have to log in</strong> using your <a href="${reverse('shib-login')}${login_query()}">Person Code</a>.</span>
  </p>
  <p class="button-login">
    <a class="link2button" href="${reverse('shib-login')}${login_query()}">
     POLIMI Login
    </a>
  </p>
  <h3 class="it-planning"><span class="it">Hai intenzione di studiare al Politecnico di Milano?</span></h3>
  <p class="instructions">
    <span class="it"><strong>Devi creare fin da subito  il tuo account POLIMI</strong> e usarlo per accedere ai corsi. <br /> Clicca su <a href="${reverse('shib-login')}${login_query()}">POLIMI Login</a>, quindi su &ldquo;Registrati&rdquo;.</span>
  </p>
  <h3 class="en-planning"><span class="en">Are you planning to study at Politecnico di Milano?</span></h3>
  <p class="instructions">
    <span class="en"><strong>You need to create your POLIMI account now</strong> and use it to access the courses.<br /> Click on <a href="${reverse('shib-login')}${login_query()}">POLIMI Login</a>, then on &ldquo;Register&rdquo;.</span>
  </p>
</div>
% endif




% endif

## TODO: Use a %block tag or something to allow themes to
##       override in a more generalizable fashion.
% if not stanford_theme_enabled():
##  <div class="cta cta-welcome">
##    <h3>${_("Welcome to {platform_name}").format(platform_name=platform_name)}</h3>
##    <p>${_("Registering with {platform_name} gives you access to all of our current and future free courses. Not ready to take a course just yet? Registering puts you on our mailing list - we will update you as courses are added.").format(platform_name=platform_name)}</p>
##  </div>

% endif

## <div class="cta cta-nextsteps">
##  <h3>${_("Next Steps")}</h3>
  % if stanford_theme_enabled():
##    <p>${_("You will receive an activation email.  You must click on the activation link to complete the process.  Don't see the email?  Check your spam folder and mark emails from class.stanford.edu as 'not spam', since you'll want to be able to receive email from your courses.")}</p>
  % else:
##    <p>${_("As part of joining {platform_name}, you will receive an activation email.  You must click on the activation link to complete the process.  Don't see the email?  Check your spam folder and mark {platform_name} emails as 'not spam'.  At {platform_name}, we communicate mostly through email.").format(platform_name=platform_name)}</p>
  % endif
## </div>

<!-- % if settings.MKTG_URL_LINK_MAP.get('FAQ'): -->
<!--   <div class="cta cta-help"> -->
<!--     <h3>${_("Need Help?")}</h3> -->
<!--    <p>${_("Need help in registering with {platform_name}?").format(platform_name=platform_name)} -->
<!--       <a href="${marketing_link('FAQ')}"> -->
<!--           ${_("View our FAQs for answers to commonly asked questions.")} -->
<!--       </a> -->
<!--       ${_("Once registered, most questions can be answered in the course specific discussion forums or through the FAQs.")}</p> -->
<!--   </div> -->
<!-- % endif -->

% if third_party_auth.is_enabled():
    % for enabled in provider.Registry.get_enabled_by_backend_name("ecoopenid-auth"):
      <div class="cta eco-login">
        <h3><span class="it">Utente <a href="http://ecolearning.eu/" target="_blank">ECO</a></span><span class="locale-separator">/</span><span class="en"><a href="http://ecolearning.eu/" target="_blank">ECO</a> User</span></h3>
        <p class="instructions">
           <a class="link2button" onclick="thirdPartySignin(event, '${pipeline.get_login_url(enabled.provider_id, pipeline.AUTH_ENTRY_REGISTER)}');">
           	<span class="icon ${enabled.icon_class}"></span>Sign up with <span class="provider-name">${_('{provider_name}').format(provider_name=enabled.name)}</span>
           </a>
        </p>
      </div>
    % endfor
% endif
<div class="cta cta-help">
   <h3><span class="it">Serve AIUTO?</span><span class="locale-separator">/</span><span class="en">Need HELP?</span></h3>
   <p>${_('{email}').format(
    email='<a href="mailto:{email}">{email}</a>'.format(email=settings.TECH_SUPPORT_EMAIL))}</p>
</div>
